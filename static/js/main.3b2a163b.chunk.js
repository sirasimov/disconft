(this["webpackJsonpnft-marketplace"]=this["webpackJsonpnft-marketplace"]||[]).push([[0],{173:function(e,t){},268:function(e,t){},270:function(e,t){},336:function(e,t){},338:function(e,t){},378:function(e,t){},380:function(e,t){},381:function(e,t){},386:function(e,t){},388:function(e,t){},394:function(e,t){},396:function(e,t){},415:function(e,t){},427:function(e,t){},430:function(e,t){},45:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return j})),n.d(t,"a",(function(){return b})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return m})),n.d(t,"f",(function(){return f})),n.d(t,"b",(function(){return p}));var c=n(26),a=n(0),s=n.n(a),r=n(15),i=n(61),l=n(13),o=n(89),u=n(56),d=n.n(u),j=function(e){var t=e.wallet,n=e.Tezos;return function(){var e=Object(r.a)(s.a.mark((function e(c){var a,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={},n.setWalletProvider(t),e.next=5,t.client.getActiveAccount();case 5:if(e.sent){e.next=9;break}return e.next=9,t.requestPermissions({network:{type:l.q.HANGZHOUNET,rpcUrl:"https://hangzhounet.smartpy.io/"}});case 9:return e.next=11,t.getPKH();case 11:return r=e.sent,e.next=14,n.tz.getBalance(r);case 14:i=e.sent,a.user={userAddress:r,balance:i.toNumber()},c(b(a.user)),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),console.log(e.t0),c({type:"CONNECT_WALLET_ERROR"});case 23:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t){return e.apply(this,arguments)}}()},b=function(e){return{type:"CONNECT_WALLET",user:e}},h=function(e){var t=e.wallet,n=e.setTezos;return function(){var e=Object(r.a)(s.a.mark((function e(c){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(new i.a("https://hangzhounet.smartpy.io/")),c({type:"DISCONNECT_WALLET"}),!t){e.next=9;break}return e.next=5,t.client.removeAllAccounts();case 5:return e.next=7,t.client.removeAllPeers();case 7:return e.next=9,t.client.destroy();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};function O(t){return e.from(function(e){return new Uint8Array(e.match(/[\da-f]{2}/gi).map((function(e){return parseInt(e,16)})))}(t)).toString("utf8")}var m=function(){return function(){var e=Object(r.a)(s.a.mark((function e(t){var n,a,r,i,l,u,j,b,h,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("https://api.hangzhounet.tzkt.io/v1/contracts/".concat(o.a.contractAddress,"/bigmaps/data/keys"));case 3:return n=e.sent,e.next=6,d.a.get("https://api.hangzhounet.tzkt.io/v1/contracts/".concat(o.a.tokenAddress,"/bigmaps/token_metadata/keys"));case 6:a=e.sent,r=n.data,i=a.data,l=[],u=0;case 11:if(!(u<r.length)){e.next=22;break}return j=O(i[u].value.token_info[""]).split("//").at(-1),e.next=15,d.a.get("https://ipfs.io/ipfs/"+j);case 15:b=e.sent,h=r[u].value,m=b.data,l[u]=Object(c.a)(Object(c.a)(Object(c.a)({},h),m),{},{token_id:i[u].value.token_id});case 19:u++,e.next=11;break;case 22:console.log(l),t({type:"SET_TOKEN_DATA",payload:l}),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(0),console.log(e.t0);case 29:case"end":return e.stop()}}),e,null,[[0,26]])})));return function(t){return e.apply(this,arguments)}}()},f=function(e){var t=e.Tezos,n=e.amount,c=e.metadata;return function(){var e=Object(r.a)(s.a.mark((function e(a){var r,i,l,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.wallet.at(o.a.contractAddress);case 3:for(r=e.sent,i="",l=0;l<c.length;l++)i+=c.charCodeAt(l).toString(16).slice(-4);return e.next=8,r.methods.mint(n,i).send();case 8:return u=e.sent,e.next=11,u.confirmation();case 11:a(m()),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}()},p=function(e){var t=e.Tezos,n=e.amount,c=e.id;return function(){var e=Object(r.a)(s.a.mark((function e(a){var r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.wallet.at(o.a.contractAddress);case 3:return r=e.sent,e.next=6,r.methods.collect(c).send({mutez:!0,amount:n});case 6:return i=e.sent,e.next=9,i.confirmation();case 9:a(m()),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()}}).call(this,n(10).Buffer)},502:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(103),s=n.n(a),r=n(0),i=n.n(r),l=n(4),o=n(15),u=n(14),d=n(33),j=n(78),b=n(45),h=n(2),O=function(e){var t=e.Tezos,n=e.wallet,c=e.setTezos,a=Object(d.c)((function(e){return e.walletConfig.user})),s=Object(d.b)(),r=function(e){e.preventDefault(),""===a.userAddress?s(Object(b.c)({Tezos:t,wallet:n})):s(Object(b.d)({wallet:n,setTezos:c}))};return Object(h.jsxs)("div",{className:"ui menu black",style:{marginTop:"30px"},children:[Object(h.jsxs)("a",{href:"/#",className:"ui header item",children:[Object(h.jsx)("img",{style:{width:"100px"},src:"https://beta.discoapp.xyz/static/media/navbar_logo.eab00386.png"}),"_nfts"]}),Object(h.jsx)(j.b,{className:"item",to:"/",children:"Home"}),""!==a.userAddress?Object(h.jsx)(j.b,{className:"item",to:"/create",children:"Create NFT"}):null,Object(h.jsxs)("div",{className:"right menu",children:[""!==a.userAddress?Object(h.jsx)(j.b,{className:"item",to:"/",children:"Profile"}):null,""===a.userAddress?Object(h.jsx)("a",{href:"/#",className:"item",onClick:r,children:"Connect Wallet"}):Object(h.jsx)("a",{href:"/#",className:"item",onClick:r,children:"Disconnect Wallet"})]})]})},m=n(61),f=n(247),p=n(13),x=n(19),v=function(e){var t=e.item,n=e.onClick,c=e.onCollect;return Object(h.jsxs)("div",{className:"ui fluid card",children:[Object(h.jsx)("div",{className:"image",children:Object(h.jsx)("img",{onClick:n,style:{maxHeight:"200px",objectFit:"cover"},src:"https://ipfs.io/ipfs/".concat(t.image.split("ipfs://")[1]),alt:t.description})}),Object(h.jsxs)("div",{className:"content",children:[Object(h.jsxs)("div",{className:"right floated",children:["Price:",Object(h.jsx)("div",{style:{color:"black"},children:t.amount+" \ua729"})]}),Object(h.jsx)("div",{className:"header",children:t.name}),Object(h.jsx)("div",{className:"meta",children:t.symbol}),Object(h.jsx)("div",{className:"description",children:t.description.length>15?t.description.slice(0,15)+"...":t.description})]}),Object(h.jsxs)("div",{className:"extra content",children:[Object(h.jsx)("span",{className:"right floated",children:Object(h.jsx)("button",{className:"ui basic button",onClick:c,children:t.collectable?"Buy":"Sold Out"})}),Object(h.jsxs)("span",{children:["Token ID:",Object(h.jsx)("div",{style:{color:"black"},children:t.token_id})]})]})]})},N=function(e){var t=e.Tezos,n=Object(d.c)((function(e){return e.tokenData})),c=Object(d.b)(),a=Object(x.f)(),s=n.map((function(e,n){return Object(h.jsx)(v,{item:e,onCollect:function(){return c(Object(b.b)({Tezos:t,amount:e.amount,id:e.token_id}))},onClick:function(){return e.collectable&&a.push("/show/".concat(e.token_id))}},n)}));return Object(h.jsx)("div",{className:"ui link three column grid cards",children:s})},g=n(252),T=n(149),k=new T.b({token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweGIwNDgwNjdDQUNkNjM3NjJjNTZDYWVDZTUxMzA0QzllMjhBZEJFNTkiLCJpc3MiOiJuZnQtc3RvcmFnZSIsImlhdCI6MTY0MjcwNTUwODM2OSwibmFtZSI6IkRJU0NPIn0.9HUEs7vbZ6S1BQqZp0Z290xkd20ImnN04Re2ncgcblo"}),y=function(e){var t=e.Tezos,n=Object(d.b)(),a=Object(g.a)({accept:[".png",".jpg",".jpeg"],multiple:!1,readAs:"ArrayBuffer"}),s=Object(u.a)(a,2),r=s[0],l=s[1].filesContent,j=Object(c.useState)(""),O=Object(u.a)(j,2),m=O[0],f=O[1],p=Object(c.useState)(""),x=Object(u.a)(p,2),v=x[0],N=x[1],y=Object(c.useState)(""),w=Object(u.a)(y,2),A=w[0],C=w[1],z=Object(c.useState)("0"),S=Object(u.a)(z,2),E=S[0],I=S[1],_=Object(c.useState)(""),D=Object(u.a)(_,2),L=D[0],P=D[1],Z=Object(c.useState)(!1),B=Object(u.a)(Z,2),H=B[0],R=B[1];return Object(h.jsx)("div",{children:Object(h.jsxs)("form",{className:"ui form error",children:[Object(h.jsxs)("div",{className:"field required ".concat(H?"disabled":""),children:[Object(h.jsx)("label",{children:"Token Name"}),Object(h.jsx)("input",{type:"text",value:m,onChange:function(e){return f(e.target.value)},placeholder:"Tez Bytes"})]}),m.length>30?Object(h.jsxs)("div",{className:"ui error message",children:[Object(h.jsx)("div",{className:"header",children:"Too long!"}),Object(h.jsx)("p",{children:"The name must be less than 30 letters."})]}):null,Object(h.jsxs)("div",{className:"field required ".concat(H?"disabled":""),children:[Object(h.jsx)("label",{children:"Description"}),Object(h.jsx)("input",{type:"text",value:v,onChange:function(e){return N(e.target.value)},placeholder:"A digital art piece!"})]}),v.length>300?Object(h.jsxs)("div",{className:"ui error message",children:[Object(h.jsx)("div",{className:"header",children:"Too long!"}),Object(h.jsx)("p",{children:"The Description must be less than 300 letters."})]}):null,Object(h.jsxs)("div",{className:"field required ".concat(H?"disabled":""),children:[Object(h.jsx)("label",{children:"Symbol"}),Object(h.jsx)("input",{type:"text",value:A,onChange:function(e){return C(e.target.value)},placeholder:"TBY"})]}),Symbol.length>10?Object(h.jsxs)("div",{className:"ui error message",children:[Object(h.jsx)("div",{className:"header",children:"Too long!"}),Object(h.jsx)("p",{children:"The Symbol must be less than 10 letters."})]}):null,Object(h.jsxs)("div",{className:"field required ".concat(H?"disabled":""),children:[Object(h.jsx)("label",{children:"Selling Amount (Mutez) (There is a 3% service fee)"}),Object(h.jsx)("input",{type:"text",value:E,onChange:function(e){return I(e.target.value)},placeholder:"Amount"})]}),/^-?\d+$/.test(E)||""===E?null:Object(h.jsxs)("div",{className:"ui error message",children:[Object(h.jsx)("div",{className:"header",children:"Only number allowed"}),Object(h.jsx)("p",{children:"The amount must be a valid Mutez value."})]}),Object(h.jsxs)("div",{className:"field required ".concat(H?"disabled":""),children:[Object(h.jsx)("label",{children:"Image"}),Object(h.jsxs)("button",{type:"button",className:"ui basic button",onClick:function(e){r(),e.preventDefault()},children:["Select files"," "]}),l.length>0?l[0].name:""]}),L?Object(h.jsxs)("div",{className:"ui error message",children:[Object(h.jsx)("div",{className:"header",children:"Error"}),Object(h.jsx)("p",{children:L})]}):null,Object(h.jsx)("button",{className:"ui button ".concat(H?"loading":""),onClick:function(e){return function(e){e.preventDefault(),""!==m&&""!==v&&""!==A&&""!==E&&/^-?\d+$/.test(E)&&0!==l.length?(R(!0),P(""),Object(o.a)(i.a.mark((function e(){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.store({name:m,description:v,decimals:0,symbol:A,image:new T.a([l[0].content],l[0].name,{type:"image/"+l[0].name.split(".")[1]})});case 2:c=e.sent,console.log(c),n(Object(b.f)({Tezos:t,amount:E,metadata:c.url})),R(!1),f(""),I("0"),N(""),C("");case 10:case"end":return e.stop()}}),e)})))()):P("Some Error Occurred. Please check entered details.")}(e)},type:"submit",children:"Mint"})]})})},w=function(e){var t,n,a=e.Tezos,s=Object(d.c)((function(e){return e.tokenData})),r=Object(d.b)(),i=Object(x.g)().id,l=Object(c.useState)(null),o=Object(u.a)(l,2),j=o[0],O=o[1];return Object(c.useEffect)((function(){var e=s[parseInt(i)];e&&O(e)}),[s,i]),Object(h.jsx)("div",{className:"ui internally celled grid",children:null!==j?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"ui",children:j.description}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"nine wide column",children:Object(h.jsx)("img",{src:"https://ipfs.io/ipfs/".concat(j.image.split("ipfs://")[1]),alt:j.description})}),Object(h.jsxs)("div",{className:"seven wide column container center",children:[Object(h.jsxs)("div",{className:"ui",children:[Object(h.jsx)("h3",{className:"ui right floated header",children:j.name}),Object(h.jsx)("h3",{className:"ui left aligned header",children:"Name"})]}),Object(h.jsxs)("div",{className:"ui",children:[Object(h.jsx)("h3",{className:"ui right floated header",children:j.symbol}),Object(h.jsx)("h3",{className:"ui left aligned header",children:"Symbol"})]}),Object(h.jsxs)("div",{className:"ui ",onClick:function(){navigator.clipboard.writeText(j.holder+"")},children:[Object(h.jsx)("h3",{className:"ui right floated header green",style:{cursor:"pointer"},"data-content":"Copy to clipboard",children:(null===(t=j.holder)||void 0===t?void 0:t.slice(0,6))+"..."}),Object(h.jsx)("h3",{className:"ui left aligned header",children:"Holder"})]}),Object(h.jsxs)("div",{className:"ui ",onClick:function(){navigator.clipboard.writeText(j.author+"")},children:[Object(h.jsx)("h3",{className:"ui right floated header green",style:{cursor:"pointer"},"data-content":"Copy to clipboard",children:(null===(n=j.author)||void 0===n?void 0:n.slice(0,6))+"..."}),Object(h.jsx)("h3",{className:"ui left aligned header",children:"Author"})]}),Object(h.jsxs)("div",{className:"ui",children:[Object(h.jsx)("h3",{className:"ui right floated header",children:j.amount}),Object(h.jsx)("h3",{className:"ui left aligned header",children:"Price"})]}),Object(h.jsxs)("div",{className:"ui",children:[Object(h.jsx)("h3",{className:"ui right floated header",children:j.token_id}),Object(h.jsx)("h3",{className:"ui left aligned header",children:"Token ID"})]}),Object(h.jsx)("div",{className:"ui",children:Object(h.jsx)("button",{className:"fluid ui button basic green",onClick:function(){return j.collectable&&r(Object(b.b)({Tezos:a,amount:j.amount,id:j.token_id}))},children:j.collectable?"Buy":"Sold Out"})})]})]})]}):null})},A=function(){var e=Object(d.b)(),t=Object(c.useState)(new m.a("https://hangzhounet.smartpy.io/")),n=Object(u.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(null),j=Object(u.a)(r,2),v=j[0],g=j[1];return Object(c.useEffect)((function(){Object(o.a)(i.a.mark((function t(){var n,c,s,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=new f.a({name:"NFT marketplace",preferredNetwork:p.q.HANGZHOUNET,colorMode:p.j.LIGHT,disableDefaultEvents:!1,eventHandlers:(n={},Object(l.a)(n,p.e.PAIR_INIT,{handler:p.L.PAIR_INIT}),Object(l.a)(n,p.e.PAIR_SUCCESS,{handler:function(e){return e.publicKey}}),n)}),a.setWalletProvider(c),t.next=4,c.client.getActiveAccount();case 4:if(!t.sent){t.next=13;break}return t.next=8,c.getPKH();case 8:return s=t.sent,t.next=11,a.tz.getBalance(s);case 11:r=t.sent,e(Object(b.a)({userAddress:s,balance:r.toNumber()}));case 13:g(c);case 14:case"end":return t.stop()}}),t)})))()}),[a,e]),Object(c.useEffect)((function(){e(Object(b.e)())}),[a,e]),Object(h.jsxs)("div",{className:"ui container",children:[Object(h.jsx)(O,{Tezos:a,setTezos:s,wallet:v}),Object(h.jsx)("div",{className:"ui container",children:Object(h.jsxs)(x.c,{children:[Object(h.jsx)(x.a,{path:"/create",children:Object(h.jsx)(y,{Tezos:a})}),Object(h.jsx)(x.a,{path:"/show/:id",children:Object(h.jsx)(w,{Tezos:a})}),Object(h.jsx)(x.a,{path:"/",children:Object(h.jsx)(N,{Tezos:a})})]})})]})},C=n(54),z=n(249),S=n(106),E=n(250),I=n(26),_=n(148),D=n.n(_),L={key:"root",storage:D.a},P={user:{userAddress:"",userBalance:0}},Z=Object(C.b)({walletConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONNECT_WALLET":return Object(I.a)(Object(I.a)({},e),{},{user:t.user});case"DISCONNECT_WALLET":return D.a.removeItem("persist:root"),Object(I.a)({},P);case"TEZOS_INSTANCE":return Object(I.a)({},e);case"CONNECT_WALLET_ERROR":default:return e}},tokenData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOKEN_DATA":return t.payload;default:return e}}}),B=Object(S.a)(L,Z),H=Object(C.c)(B,Object(C.a)(z.a));s.a.render(Object(h.jsx)(d.a,{store:H,children:Object(h.jsx)(E.a,{loading:null,persistor:Object(S.b)(H),children:Object(h.jsx)(j.a,{children:Object(h.jsx)(A,{})})})}),document.querySelector("#root"))},89:function(e,t,n){"use strict";t.a={contractAddress:"KT1P4MYSBdjZSGXHhtyDVQGov6VvbHhpNn7w",tokenAddress:"KT1Pur8AVbnrCkTwBbZoNxFLBddb3iMaEqfV"}}},[[502,1,2]]]);
//# sourceMappingURL=main.3b2a163b.chunk.js.map